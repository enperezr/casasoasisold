window.whatInput=function(){"use strict";function e(){o(),i(event),w=!0,l=window.setTimeout(function(){w=!1},650)}function t(e){w||i(e)}function n(e){o(),i(e)}function o(){window.clearTimeout(l)}function i(e){var t=u(e),n=h[e.type];if("pointer"===n&&(n=function(e){return"number"==typeof e.pointerType?L[e.pointerType]:"pen"===e.pointerType?"touch":e.pointerType}(e)),f!==n){var o=function(e){return e.target||e.srcElement}(e),i=o.nodeName.toLowerCase(),d="input"===i?o.getAttribute("type"):null;!c.hasAttribute("data-whatinput-formtyping")&&f&&"keyboard"===n&&"tab"!==b[t]&&("textarea"===i||"select"===i||"input"===i&&m.indexOf(d)<0)||y.indexOf(t)>-1||r(n)}"keyboard"===n&&function(e){-1===p.indexOf(b[e])&&b[e]&&p.push(b[e])}(t)}function r(e){f=e,c.setAttribute("data-whatinput",f),-1===E.indexOf(f)&&E.push(f)}function u(e){return e.keyCode?e.keyCode:e.which}function d(e){var t=u(e),n=p.indexOf(b[t]);-1!==n&&p.splice(n,1)}function a(){c=document.body,window.PointerEvent?(c.addEventListener("pointerdown",t),c.addEventListener("pointermove",t)):window.MSPointerEvent?(c.addEventListener("MSPointerDown",t),c.addEventListener("MSPointerMove",t)):(c.addEventListener("mousedown",t),c.addEventListener("mousemove",t),"ontouchstart"in window&&c.addEventListener("touchstart",e)),c.addEventListener(v,t),c.addEventListener("keydown",n),c.addEventListener("keyup",n),document.addEventListener("keyup",d)}function s(){return v="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var c,p=[],w=!1,f=null,m=["button","checkbox","file","image","radio","reset","submit"],v=s(),y=[16,17,18,91,93],h={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};h[s()]="mouse";var l,E=[],b={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},L={2:"touch",3:"touch",4:"mouse"};return"addEventListener"in window&&Array.prototype.indexOf&&(document.body?a():document.addEventListener("DOMContentLoaded",a)),{ask:function(){return f},keys:function(){return p},types:function(){return E},set:r}}();